echo "ğŸ§ª Running tests before push..."

# Roda os testes com cobertura mÃ­nima, sem gerar HTML, falha se limiares nÃ£o forem atingidos
npx jest --bail --coverage --coverageReporters="text-summary" --silent

status=$?

if [ $status -ne 0 ]; then
  echo "âŒ Push bloqueado: testes falharam ou cobertura abaixo do esperado."
  exit 1
fi

echo "âœ… Testes passaram. Prosseguindo com push..."
